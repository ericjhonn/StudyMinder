<Window x:Class="StudyMinder.Views.AdicionarAssuntosEmLoteDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:icon="http://metro.mahapps.com/winfx/xaml/iconpacks"
        xmlns:shell="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        Title="Adicionar Assuntos em Lote"
        Width="600"
        Height="430"
        ResizeMode="NoResize"
        ShowInTaskbar="False"
        Background="{DynamicResource BackgroundBrush}">
    
    <!-- WindowChrome para barra de título customizada -->
    <shell:WindowChrome.WindowChrome>
        <shell:WindowChrome CaptionHeight="32"
                            ResizeBorderThickness="5"
                            GlassFrameThickness="5"
                            CornerRadius="0"
                            UseAeroCaptionButtons="True" />
    </shell:WindowChrome.WindowChrome>
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- Barra de título -->
        <Border Grid.Row="0"
                Background="{DynamicResource CardBrush}"
                Padding="8,4"
                BorderThickness="0">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <!-- Ícone -->
                <TextBlock Grid.Column="0"
                           Text="{Binding MessageType, Converter={StaticResource MessageTypeToIconConverter}}"
                           FontSize="22"
                           Margin="0,0,10,0"
                           VerticalAlignment="Center"
                           Foreground="{Binding MessageType, Converter={StaticResource MessageTypeToColorConverter}}" />

                <!-- Título -->
                <TextBlock Grid.Column="1"
                           Text="{Binding Title}"
                           Style="{DynamicResource Title3Style}"
                           Margin="0"
                           TextTrimming="CharacterEllipsis" />
            </Grid>
        </Border>
        
        <StackPanel Grid.Row="1">
            
            <!-- Contador de linhas -->
            <Grid Margin="20,20,20,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0"
                           Text="Lista de Assuntos:"
                           Style="{DynamicResource Title3Style}"
                           Margin="0" />

                <StackPanel Grid.Column="1"
                            Orientation="Horizontal">
                    <icon:PackIconMaterial Kind="FormatListNumbered"
                                           Style="{DynamicResource QuestoesIconStyle}" />
                    <TextBlock x:Name="ContadorLinhas"
                               Text="{Binding TotalLinhas, StringFormat='Total: {0} assuntos'}"
                               Style="{DynamicResource Text2Style}" />
                </StackPanel>
            </Grid>

            <!-- Caixa de texto para assuntos -->
            <TextBox x:Name="TextBoxAssuntos"
                     Style="{StaticResource ModernTextBoxWithPlaceholderStyle}"
                     AcceptsReturn="True"
                     TextWrapping="Wrap"
                     VerticalScrollBarVisibility="Auto"
                     VerticalContentAlignment="Top"
                     Height="250"
                     Text="{Binding TextoAssuntos, UpdateSourceTrigger=PropertyChanged}"
                     Tag="Digite cada assunto em uma linha"
                     Margin="20,20,20,0" />

            <!-- Rodapé com botões -->
            <StackPanel Orientation="Horizontal"
                        HorizontalAlignment="Right"
                        Margin="20">

                <Button Style="{StaticResource SecondaryButtonStyle}"
                        Content="Cancelar"
                        Click="Cancelar_Click"
                        Margin="0,0,12,0"
                        MinWidth="100" />

                <Button Style="{StaticResource ModernButtonStyle}"
                        Click="AdicionarAssuntos_Click"
                        IsEnabled="{Binding TemAssuntos}"
                        MinWidth="180">
                    <StackPanel Orientation="Horizontal">
                        <icon:PackIconMaterial Style="{DynamicResource AdicionarIconStyle}"
                                               Margin="0,0,8,0" />
                        <TextBlock Text="Adicionar Assuntos" />
                    </StackPanel>
                </Button>
            </StackPanel>
        </StackPanel>
            
    </Grid>
</Window>
